'use strict';var _exports;function init(){const a=require('../../lib/react.js'),b=require('../../cssStr/cssStr.js'),c=require('../../actions/webviewActions.js'),d=require('../../actions/windowActions.js'),e=require('../../actions/projectActions.js'),f=require('../../stores/projectStores.js');require('../../weapp/utils/projectManager.js');const g=require('./music.js'),h=require('./cache.js'),i=require('../../utils/newReport.js');var j;const k=a.createClass({displayName:'Sidebar',getInitialState:function(){return this.props.project&&i(`project_debug`,this.props.project.appid),{inForeground:!0}},_restart:function(){this.setState({inForeground:!0})},componentDidMount:function(){f.on('RESTART_PROJECT',this._restart)},componentWillUnmount:function(){f.removeListener('RESTART_PROJECT',this._restart)},handleOnclick:function(l){let m=l.currentTarget,n=m.dataset,o=n.type;this.props.optProject(o),i(`project_${o}`,this.props.project.appid)},handleAppTerminate:function(l){e.close(),i(`project_${close}`,this.props.project.appid)},handleAppRestart:function(l){clearTimeout(j),j=setTimeout(()=>{e.restart(this.props.project);let m='edit'===this.props.show?`project_compile`:`project_restart`;i(m,this.props.project.appid)},200)},handleAppEnterBackground:function(l){this.setState({inForeground:!1}),d.appEnterBackground(),c.postMessageToAS({eventName:'onAppEnterBackground',type:'ON_APPLIFECYCLE_EVENT'}),i(`project_background`,this.props.project.appid)},handleAppEnterForeground:function(l){this.setState({inForeground:!0}),d.appEnterForeground(),c.postMessageToAS({eventName:'onAppEnterForeground',type:'ON_APPLIFECYCLE_EVENT'})},showCustom:function(){let l=this.props.project;d.showCustomPreview({project:l,callback:m=>{f.setProjectInitPath(l.hash,{enable:m.enable,page:m.page,query:m.query}),this.handleAppRestart()}})},render:function(){let l={detail:'sidebar-item',debug:'sidebar-item',edit:'sidebar-item',mobile:'sidebar-item'},m=this.props.show;if(l[m]='sidebar-item sidebar-item-active',!this.props.project)return a.createElement('div',{className:'sidebar'},a.createElement('div',{'data-type':'debug',onClick:this.handleOnclick,className:l.debug},a.createElement('i',{className:'sidebar-item-icon sidebar-item-icon-debug'}),a.createElement('label',{className:'sidebar-item-label'},'\u8C03\u8BD5')),a.createElement('div',{className:'sidebar-item sidebar-item-sep'}),a.createElement('div',{className:'sidebar-item-toolbar'},a.createElement('div',{title:'\u8FD4\u56DE','data-type':'appTerminate',onClick:this.handleAppTerminate,className:'sidebar-item'},a.createElement('i',{className:'sidebar-item-icon  sidebar-item-icon-close'}),a.createElement('label',{className:'sidebar-item-label'},'\u8FD4\u56DE'))));let n=this.state.inForeground?{}:b.displayNone,o=this.state.inForeground?b.displayNone:{},p='debug'===m||'edit'===m?{}:b.displayNone,q='debug'===m||'edit'===m?{borderTop:'none'}:{};return a.createElement('div',{className:'sidebar'},a.createElement('div',{'data-type':'edit',onClick:this.handleOnclick,className:l.edit},a.createElement('i',{className:'sidebar-item-icon sidebar-item-icon-editor'}),a.createElement('label',{className:'sidebar-item-label'},'\u7F16\u8F91')),a.createElement('div',{'data-type':'debug',onClick:this.handleOnclick,className:l.debug},a.createElement('i',{className:'sidebar-item-icon sidebar-item-icon-debug'}),a.createElement('label',{className:'sidebar-item-label'},'\u8C03\u8BD5')),a.createElement('div',{'data-type':'detail',onClick:this.handleOnclick,className:l.detail},a.createElement('i',{className:'sidebar-item-icon sidebar-item-icon-detail'}),a.createElement('label',{className:'sidebar-item-label'},'\u9879\u76EE')),a.createElement('div',{className:'sidebar-item sidebar-item-sep'}),a.createElement('div',{className:'sidebar-item-toolbar',style:p},a.createElement(g,null),a.createElement('div',{title:`${'darwin'===process.platform?'Command':'Ctrl'} + b`,onClick:this.handleAppRestart,className:'sidebar-item',style:{paddingBottom:0}},a.createElement('i',{className:'sidebar-item-icon  sidebar-item-icon-reset'})),a.createElement('div',{title:`${'darwin'===process.platform?'Command':'Ctrl'} + b`,onClick:this.showCustom,className:'sidebar-item',style:{paddingTop:0}},a.createElement('i',{className:'sidebar-item-icon  sidebar-item-icon-custom',style:{marginRight:5}}),a.createElement('label',{className:'sidebar-item-label'},'\u7F16\u8BD1')),a.createElement('div',{title:'\u5207\u6362\u5230\u540E\u53F0','data-type':'appEnterBackground',onClick:this.handleAppEnterBackground,style:n,className:'sidebar-item'},a.createElement('i',{className:'sidebar-item-icon sidebar-item-icon-backward'}),a.createElement('label',{className:'sidebar-item-label'},'\u540E\u53F0')),a.createElement('div',{title:'\u5207\u6362\u5230\u524D\u53F0','data-type':'appEnterForeground',onClick:this.handleAppEnterForeground,style:o,className:'sidebar-item'},a.createElement('i',{className:'sidebar-item-icon  sidebar-item-icon-forward'}),a.createElement('label',{className:'sidebar-item-label'},'\u524D\u53F0')),a.createElement(h,{project:this.props.project})),a.createElement('div',{className:'sidebar-item-toolbar',style:q},a.createElement('div',{title:'\u5173\u95ED\u9879\u76EE','data-type':'appTerminate',onClick:this.handleAppTerminate,className:'sidebar-item'},a.createElement('i',{className:'sidebar-item-icon  sidebar-item-icon-close'}),a.createElement('label',{className:'sidebar-item-label'},'\u5173\u95ED'))))}});_exports=k}init(),module.exports=_exports;
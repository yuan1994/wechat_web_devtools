"use strict";var _exports;function init(){_exports=function(a={}){this.options=Object.assign({},{onMessage:function(){},onDisconnect:function(){}},a),this.msgQuery=[],this.hasInit=!1},_exports.prototype={init:function(a){this.port=a,this.onMessage(),this.onDisconnect(),this.hasInit=!0},onMessage:function(){this.port.onMessage.addListener(a=>{this.options.onMessage(a)})},onDisconnect:function(){this.port.onDisconnect.addListener(()=>{delete this.port,this.msgQuery=[],this.hasInit=!1,this.options.onDisconnect()})},postMessage:function(a,b,c,d){let e={to:a,msg:b,command:c,ext:d},f=this.port;if(!f)return void this.msgQuery.push(e);this.msgQuery.length&&(this.msgQuery.forEach(g=>{this.port.postMessage(g)}),this.msgQuery=[]);f.postMessage(e)}}}init(),module.exports=_exports;
'use strict';var _exports;function init(){const a=require('../../lib/react.js');require('../../cssStr/cssStr.js'),require('../../config/config.js');const b=require('../../stores/windowStores.js'),c=require('../../actions/windowActions.js');require('../../actions/webviewActions.js'),require('../../common/request/request.js');const d=4,e=a.createClass({displayName:'Setting',getInitialState:function(){let f=b.getSetting();return f?f:{proxyType:'SYSTEM',currentProxyType:'SYSTEM',proxyHost:'',currentProxyHost:'',proxyPort:'',currentProxyPort:''}},changeProxy:function(f){let g=f.currentTarget,h=g.dataset,j=h.type,k;k='USER'===j?`PROXY ${this.state.proxyHost}:${this.state.proxyPort}`:j,this.setState({proxyType:k})},changeProxyHost:function(f){let g=f.target.value,h=this.state.proxyPort||'80',j=`PROXY ${g}:${h}`;this.setState({proxyType:j,proxyHost:g})},changeProxyPort:function(f){let g=f.target.value,h=this.state.proxyHost,j=`PROXY ${h}:${g}`;this.setState({proxyType:j,proxyPort:g})},cancel:function(){this.setState({version:this.state.currentVersion,proxyType:this.state.currentProxyType,proxyPort:this.state.currentProxyPort,proxyHost:this.state.currentProxyHost}),this.props.showSetting()},save:function(){let f=()=>{this.setState({currentProxyType:this.state.proxyType,currentVersion:this.state.version,currentDevice:this.state.device},()=>{c.saveSetting(Object.assign({},this.state)),this.props.showSetting()})};this.state.currentProxyType===this.state.proxyType?f():c.updataProxySetting(this.state.proxyType,()=>{setTimeout(()=>{f()})})},componentDidMount:function(){},render:function(){let f=this.props.show?'setting-show':'setting';'iOS'===this.state.os?'setting-form-select-item setting-form-select-item-selected':'setting-form-select-item','Android'===this.state.os?'setting-form-select-item setting-form-select-item-selected':'setting-form-select-item';let g=Object.assign([],this.state.versionList),h=g.findIndex(k=>{return k===this.state.version});h>=d&&(g.splice(h,1),g.unshift(this.state.version));let j='SYSTEM'!==this.state.proxyType&&'DIRECT'!==this.state.proxyType;return a.createElement('div',{className:f},a.createElement('div',{className:'setting-hd'},a.createElement('h3',{className:'setting-hd-title'},'\u8BBE\u7F6E')),a.createElement('div',{className:'setting-bd'},a.createElement('div',{className:'setting-form-title'},'\u8BBE\u7F6E\u4EE3\u7406'),a.createElement('div',{className:'setting-form-bd'},a.createElement('label',{htmlFor:'noProxy',className:'setting-form-option'},a.createElement('input',{onChange:this.changeProxy,checked:'DIRECT'===this.state.proxyType,'data-type':'DIRECT',type:'radio',name:'proxy',id:'noProxy'}),a.createElement('i',{className:'setting-form-radio'}),'\u4E0D\u4F7F\u7528\u4EFB\u4F55\u4EE3\u7406\uFF0C\u52FE\u9009\u540E\u76F4\u8FDE\u7F51\u7EDC'),a.createElement('label',{htmlFor:'systemProxy',className:'setting-form-option'},a.createElement('input',{onChange:this.changeProxy,checked:'SYSTEM'===this.state.proxyType,'data-type':'SYSTEM',type:'radio',name:'proxy',id:'systemProxy'}),a.createElement('i',{className:'setting-form-radio'}),'\u4F7F\u7528\u7CFB\u7EDF\u4EE3\u7406'),a.createElement('label',{htmlFor:'manuallyProxy',className:'setting-form-option'},a.createElement('input',{onChange:this.changeProxy,checked:j,'data-type':'USER',type:'radio',name:'proxy',id:'manuallyProxy'}),a.createElement('i',{className:'setting-form-radio'}),'\u624B\u52A8\u8BBE\u7F6E\u4EE3\u7406'),a.createElement('div',{className:'setting-form-proxy-area'},a.createElement('input',{disabled:!j,onChange:this.changeProxyHost,value:this.state.proxyHost,type:'text',className:'setting-form-proxy-address',placeholder:'\u8BF7\u586B\u5199\u4EE3\u7406\u5730\u5740'}),a.createElement('input',{disabled:!j,onChange:this.changeProxyPort,value:this.state.proxyPort,type:'number',className:'setting-form-proxy-port',placeholder:'\u8BF7\u586B\u5199\u7AEF\u53E3'})))),a.createElement('div',{className:'setting-ft'},a.createElement('a',{onClick:this.cancel,href:'javascript:;',className:'setting-button-default'},'\u53D6\u6D88'),a.createElement('a',{onClick:this.save,href:'javascript:;',className:'setting-button-primary'},'\u4FDD\u5B58')))}});_exports=e}init(),module.exports=_exports;
'use strict';var _exports;function init(){const a=require('../../lib/react.js'),b=require('../../lib/react-dom.js'),c=require('./webviewheader.js'),d=require('./webviewbody.js'),e=require('./webviewfooter.js'),f=require('./webviewloading.js'),g=require('./webviewshare.js'),h=require('./webviewcard.js'),i=require('../../stores/webviewStores.js'),j=require('../../actions/windowActions.js'),k=require('../../cssStr/cssStr.js'),l=a.createClass({displayName:'Webview',getInitialState:function(){return{showFooter:!1,showShare:!1,shareOpt:{},webviewID:parseInt(this.props.webviewID),showCard:!1,cardInfo:{}}},goBack:function(m){let n=this.state.webviewID,o=b.findDOMNode(this.refs.container).querySelector(`.webviewbody${n}`);this.props.goBack(n,o,m)},showFooter:function(m){let n=m===void 0?!this.state.showFooter:m;this.setState({showFooter:n})},showShare:function(m){this.setState({showShare:m})},_showShareWebview:function(m,n,o){this.setState({showShare:!0,showFooter:!1,shareOpt:{title:o.title,desc:o.desc||o.title,imgUrl:o.img_url,sdkName:n.sdkName}})},_cardSdk:function(m,n,o,p,q){this.setState({showCard:!0,cardInfo:{sdkName:n,data:q,webviewID:m,isHavePurview:p,cardData:o}}),j.disAbleURLBar()},closeCard:function(){this.setState({showCard:!1,cardType:'',cardWebviewID:''}),j.ableURLBar()},componentDidMount:function(){i.on(`SHOW_SHARE_WEBVIEW_${this.state.webviewID}`,this._showShareWebview),i.on('CRAD_SDK_RES',this._cardSdk)},componentWillUnmount:function(){i.removeListener(`SHOW_SHARE_WEBVIEW_${this.state.webviewID}`,this._showShareWebview),i.removeListener('CRAD_SDK_RES',this._cardSdk)},render:function(){let{webviewID:m,project:n,offset:o,isTabWebview:p,href:q,pageJSON:r,appJSON:s,isMap:t,chooseLocation:u,closeLocation:v,hideBack:w,goBack:x,getSimulatorActions:y,postAppRoute:z,type:A,shareBtnShow:B}=this.props,C=r.backgroundColor||s.window.backgroundColor||'#ffffff',D={width:o.width,backgroundColor:C},E={width:o.width,height:o.height},F=this.props.project?null:a.createElement(h,{showCard:this.state.showCard,cardInfo:this.state.cardInfo,closeCard:this.closeCard}),G=this.props.project?null:a.createElement(g,{webviewID:m,getSimulatorActions:y,show:this.state.showShare,showShare:this.showShare,showFooter:this.showFooter,shareOpt:this.state.shareOpt}),H=this.state.showCard?k.webviewDisplayNone:{};return a.createElement('div',{ref:'container',className:'simulator',style:D},a.createElement('div',{style:H},a.createElement(c,{showRecordWording:this.props.showRecordWording,offset:o,hideBack:w,webviewID:m,project:n,isMap:t,chooseLocation:u,closeLocation:v,pageJSON:r,appJSON:s,goBack:this.goBack,showFooter:this.showFooter}),this.props.topTabDom,a.createElement('div',{className:'simulator-bd',style:E},a.createElement(f,{webviewID:m}),G,a.createElement(d,{type:A,isMap:t,chooseLocation:u,closeLocation:v,offset:o,href:q,webviewID:m,project:n,getSimulatorActions:y,postAppRoute:z,isTabWebview:p,goBack:this.goBack}),a.createElement(e,{shareBtnShow:B,project:n,offset:o,webviewID:m,getSimulatorActions:y,show:this.state.showFooter,showFooter:this.showFooter}))),F)}});_exports=l}init(),module.exports=_exports;
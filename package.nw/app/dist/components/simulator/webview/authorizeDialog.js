'use strict';var _exports;function init(){const a=require('../../../lib/react.js'),b=require('../../../cssStr/cssStr.js'),c=require('../../../stores/windowStores.js'),d=3,e=a.createClass({displayName:'WebviewAuthorizeDialog',getInitialState:function(){return{appicon_url:'',appname:0,scope_list:[],show:!1,lazyLoaded:!1}},_authorizeSdkShowDialog:function(f){let{scope_list:g,appicon_url:h,appname:j}=f;for(let k=0;k<g.length;++k){let l=g[k];l.checked=!(l.auth_state!=d)||2==l.auth_state}this._callback=f.callback,this.setState({lazyLoaded:!0,show:!0,appicon_url:h,appname:j,scope_list:g})},componentDidMount:function(){c.on(`WINDOW_SHOW_AUTHORIZE_CONFIRM`,this._authorizeSdkShowDialog)},componentWillUnmount:function(){c.removeListener(`WINDOW_SHOW_AUTHORIZE_CONFIRM`,this._authorizeSdkShowDialog)},handleOnAllow:function(){this.callback(!0)},handleOnCancel:function(){this.callback(!1)},callback:function(f){'function'==typeof this._callback&&(this._callback(f,this.state.scope_list),this._callback=void 0),this.setState({show:!1})},_checkboxChange:function(f){var g=this.state.scope_list;return()=>{g[f].checked=!g[f].checked,this.setState({scope_list:g})}},render:function(){if(!this.state.lazyLoaded)return null;let f=this.state.scope_list,g=[];for(let h=0;h<f.length;++h){let j=f[h];if(j.auth_state==d)g.push(a.createElement('li',{key:j.scope},a.createElement('i',{className:'simulator-authorize-dialog-readonly'}),j.desc));else{let k='authorize_checkbox'+h,l=!!j.checked;g.push(a.createElement('li',{key:j.scope},a.createElement('label',{className:'simulator-authorize-dialog-checkbox',htmlFor:k},a.createElement('input',{id:k,type:'checkbox',checked:l,onChange:this._checkboxChange(h)}),a.createElement('i',null)),a.createElement('span',{onClick:this._checkboxChange(h)},j.desc)))}}return a.createElement('div',{style:this.state.show?{}:b.displayNone,className:'simulator-authorize-dialog-wrapper'},a.createElement('div',{className:'simulator-authorize-dialog-mask'}),a.createElement('div',{className:'simulator-authorize-dialog'},a.createElement('div',{className:'simulator-authorize-dialog-hd'},a.createElement('h3',{className:'simulator-authorize-dialog-title'},'\u5FAE\u4FE1\u767B\u9646')),a.createElement('div',{className:'simulator-authorize-dialog-bd'},a.createElement('img',{className:'simulator-authorize-dialog-logo',width:'100',src:this.state.appicon_url}),a.createElement('p',{className:'simulator-authorize-dialog-tips'},this.state.appname,' \u7533\u8BF7\u83B7\u5F97\u4EE5\u4E0B\u6743\u9650\uFF1A'),a.createElement('ul',{className:'simulator-authorize-dialog-list'},g)),a.createElement('div',{className:'simulator-authorize-dialog-ft'},a.createElement('a',{href:'javascript:;',onClick:this.handleOnAllow},'\u5141\u8BB8'),a.createElement('a',{href:'javascript:;',onClick:this.handleOnCancel},'\u62D2\u7EDD'))))}});_exports=e}init(),module.exports=_exports;
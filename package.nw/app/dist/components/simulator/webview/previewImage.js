'use strict';var _exports;function init(){const a=require('../../../lib/react.js');require('../../../lib/react-dom.js');const b=require('../../../stores/webviewStores.js'),c=require('../../../cssStr/cssStr.js');require('../../../utils/file.js');const d=require('../../../weapp/utils/tools'),f=a.createClass({displayName:'PreviewImage',getInitialState:function(){return{urls:[],translateX:0,load:!1,hidden:!0}},componentDidMount:function(){b.on('SEND_AS_SDK',this._handleAssdkCommand)},componentWillUnmount:function(){b.removeListener('SEND_AS_SDK',this._handleAssdkCommand)},_handleAssdkCommand:function(g,h,i){let{args:j}=h;if('previewImage'===g){let k=j.current,l=j.urls||[];k=l.indexOf(k),k=0<=k?k:0,this.callback=i,this.setState({urls:l,translateX:-k*this.props.width,load:!0,hidden:!1}),i({errMsg:'previewImage:ok'})}},hide:function(){this.setState({hidden:!0})},onMouseDown:function(g){this.startX=g.pageX,this.touch=!0,this.lastTranslateX=this.state.translateX},onMouseMove:function(g){if(this.touch){let i=g.pageX-this.startX+this.lastTranslateX;i=Math.min(0,i),i=Math.max((1-this.state.urls.length)*this.props.width,i),this.setState({translateX:i})}},onMouseUp:function(g){this.startX=0,this.touch=!1,this.setState({translateX:parseInt(this.state.translateX/this.props.width-0.5)*this.props.width})},render:function(){let g={width:`${100*this.state.urls.length}%`,transition:'all linear 0.3s',transform:`translate3d(${this.state.translateX}px,0,0)`};return this.state.load?a.createElement('div',{className:'weui-gallery-wrapper',style:this.state.hidden?c.displayNone:{}},a.createElement('div',{className:'simulator-hd'},a.createElement('div',{className:'simulator-hd-back',onClick:this.hide},a.createElement('i',{className:'simulator-hd-back-icon'}),a.createElement('span',{style:{color:'white'}},'\u8FD4\u56DE'))),a.createElement('div',{className:'weui-gallery-body'},a.createElement('div',{className:'weui-gallery',style:g,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseUp},this.state.urls.map(h=>{let i=h;return 0<=h.indexOf('wxfile://')&&(i=d.getUrlFromFilePath(this.props.project,h.replace('wxfile://',''))),a.createElement('div',{className:'weui-gallery__img',style:{backgroundImage:`url("${i}")`}})})))):null}});_exports=f}init(),module.exports=_exports;
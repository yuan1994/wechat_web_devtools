'use strict';var _exports;function init(){function a(g,h,j){let{files:k,reg:l,project:n}=g;if(0===k.length)return void j(null,h);let o=k.shift(),p=1,q=e.extname(o);if(!f[q])a(g,h,j);else{let r=e.relative(n.projectpath,o),s=r.replace(/\\/g,'/'),t=c.createReadStream(o,{encoding:'utf8'}),u=b.createInterface({input:t});u.on('line',v=>{let w=v.match(l);w&&(!h[s]&&(h[s]=[]),h[s].push({line:p,data:v})),p++}),u.on('close',()=>{a(g,h,j)})}}const b=require('readline'),c=require('fs'),d=require('glob'),e=require('path'),f={'.js':!0,'.json':!0,'.wxml':!0,'.wxss':!0,'.html':!0,'.css':!0,'.md':!0,'.txt':!0};_exports=(g={},h)=>{let{cwd:j,wholeword:k,i:l,str:n,project:o}=g,p={};d(`${j}/**/*`,{nodir:!0},(q,r)=>{if(q)return void h(q);let s=n.replace(/[|\\{}()[\]^$+*?.]/g,'\\$&');k&&(s=`\\b${s}\\b`),s=l?new RegExp(s,'i'):new RegExp(s),a({files:r,reg:s,project:o},p,h)})}}init(),module.exports=_exports;
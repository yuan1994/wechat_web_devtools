'use strict';var _exports;function init(){const a=require('../../lib/react.js'),b=require('../../cssStr/cssStr.js');require('../../actions/projectActions.js'),require('../../stores/projectStores.js');const c=require('../../weapp/utils/projectManager.js'),d=require('../../stores/windowStores.js'),e=a.createClass({displayName:'CustomPreview',getInitialState:function(){return{err:'',page:'',query:'',show:!1,type:'',enable:!1}},checkPage:function(f){let g=this.state.project;return c.isProjectPage(g,this.state.page)?(this.setState({err:``}),!0):(this.setState({err:`页面不存在，请检查后重试`}),!1)},changeQuery:function(f){let g=f.target.value;this.setState({query:g})},changePage:function(f){let g=f.target.value;this.setState({page:g})},upload:function(f){this.checkPage()&&(this.state.callback({page:this.state.page,query:this.state.query,enable:this.state.enable}),this.close())},_showCustomPreview:function(f){let{project:g}=f,{uploadPath:h,initPath:i}=g,j='upload'===f.type?h:i,{page:k,query:l,enable:m}=j;this.setState({show:!0,page:k||'',query:l||'',project:g,callback:f.callback,type:f.type,enable:m})},changeEnable:function(){this.setState({enable:!this.state.enable})},close:function(){this.setState({err:'',page:'',query:'',show:!1,type:'',enable:!1})},componentDidMount:function(){d.on('SHOW_CUSTOM_PREVIEW',this._showCustomPreview)},componentWillUnmount:function(){d.removeListener('SHOW_CUSTOM_PREVIEW',this._showCustomPreview)},render:function(){let f=this.state.show?b.displayBlock:b.displayNone,g='upload'===this.state.type,h=g?'\u9884\u89C8':'\u786E\u5B9A';return a.createElement('div',{className:'setting-show',style:f},a.createElement('div',{className:'setting-hd'},a.createElement('h3',{className:'setting-hd-title'},'\u81EA\u5B9A\u4E49\u9884\u89C8')),a.createElement('div',{className:'setting-bd'},a.createElement('div',{className:'custom-preview'},a.createElement('div',{className:'custom-preview-form'},a.createElement('div',{className:'custom-preview-form-item'},a.createElement('div',{className:'custom-preview-form-label'},'\u8BBE\u7F6E\u542F\u52A8\u9875\u9762 ',a.createElement('span',null,'*\u5FC5\u586B')),a.createElement('div',{className:'custom-preview-form-value'},a.createElement('input',{type:'text',onChange:this.changePage,value:this.state.page,placeholder:'\u9875\u9762\u5730\u5740'})),a.createElement('div',{className:'custom-preview-form-tips'},a.createElement('p',null,this.state.err))),a.createElement('div',{className:'custom-preview-form-item'},a.createElement('div',{className:'custom-preview-form-label'},'\u8BBE\u7F6E\u9875\u9762\u81EA\u5B9A\u4E49\u53C2\u6570'),a.createElement('div',{className:'custom-preview-form-value'},a.createElement('input',{value:this.state.query,onChange:this.changeQuery,type:'text',placeholder:'\u53C2\u6570'}))),a.createElement('div',{style:g?b.displayNone:{},className:'custom-preview-form-item'},a.createElement('div',{className:'custom-preview-form-value'},a.createElement('label',{onClick:this.changeEnable,htmlFor:'customPreviewCheckbox',className:'custom-preview-form-checkbox'},a.createElement('input',{checked:this.state.enable,type:'checkbox'}),a.createElement('i',null),'\u4F7F\u7528\u4EE5\u4E0A\u6761\u4EF6\u7F16\u8BD1')))))),a.createElement('div',{className:'setting-ft'},a.createElement('a',{onClick:this.close,href:'javascript:;',className:'setting-button-default'},'\u53D6\u6D88'),a.createElement('a',{onClick:this.upload,href:'javascript:;',className:'detail-meta-upload'},h)))}});_exports=e}init(),module.exports=_exports;
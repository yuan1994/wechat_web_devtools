'use strict';var _exports;function init(){const a=require('../actions/windowActions.js');let b=!1;const c=function(f){0<f&&a.toggleNewFeatureCheckShowStatus(!0)},d=function(f,g){0===g&&nw.Shell.openExternal(f)};_exports={checkCouldNotify:function(f){var g={};try{g=JSON.parse(localStorage.getItem('notice_show_info'))||{}}catch(l){log.error('notifications.js checkCouldNotify notice_show_info from localStorage JSON.parse error'),localStorage.setItem('notice_show_info','{}')}var h={},j=Date.now();for(var k in g)2592000000>j-g[k]&&(h[k]=g[k]);return h[f.id]=j,localStorage.setItem('notice_show_info',JSON.stringify(h)),!g[f.id]},handleNotificationList:function(f){for(var g=0;g<f.length;g++)this.handleNotification(f[g])},handleNotification:function(f){if(this.checkCouldNotify(f)){let g={title:f.title,message:f.content,priority:Math.min(f.type,2)},h=()=>{};2==f.type?(g.buttons=[{title:f.attr&&f.attr.cancelText||'\u53D6\u6D88'},{title:f.attr&&f.attr.confirmText||'\u524D\u5F80\u8BBE\u7F6E'}],h=c):3==f.type&&(g.buttons=[{title:f.attr&&f.attr.confirmText||'\u67E5\u770B\u8BE6\u60C5'}],h=d.bind(this,f.attr&&f.attr.link)),this.notifications(g,h)}},notifications:function(f,g){let h=(+new Date).toString();return g=g||function(){},f=Object.assign({type:'basic',iconUrl:'app/images/logo.png'},f),b||(b={},chrome.notifications.onButtonClicked.addListener((j,k)=>{b[j]&&(b[j](k),chrome.notifications.clear(j))})),b[h]=g,chrome.notifications.create(h,f),h}}}init(),module.exports=_exports;
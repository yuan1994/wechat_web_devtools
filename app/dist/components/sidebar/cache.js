"use strict";function init(){var e=require("../../lib/react.js"),i=require("../../cssStr/cssStr.js"),t=require("../../stores/windowStores.js"),a=require("../../actions/windowActions.js"),r=require("../../actions/webviewActions.js"),s=require("../../config/dirConfig.js"),n=require("glob"),c=require("path"),o=require("fs"),l=e.createClass({displayName:"Music",getInitialState:function(){return{show:!1}},clickOpen:function(){var e=this.state.show;this.setState({show:!e})},clearStorage:function(){var e=t.getUserInfo(),i=e?e.openid:"unknow",n=s.WeappStorage,l=this.props.project,p=l.appid,u=l.appname,d=c.join(n,p+"_"+u+"_"+i+".data.json");o.unlink(d,function(e){var i="清除数据存储成功";a.showTipsMsg({msg:i}),r.upASData(p,{})})},clearFileStorage:function(){var e=t.getUserInfo(),i=e?e.openid:"unknow",r=s.WeappFileCache,l=this.props.project,p=l.hash;n("*",{cwd:r},function(e,t){var s=p+"_"+i;t.forEach(function(e){if(e.indexOf(s)>-1){var i=c.join(r,e);o.unlink(i)}});var n="清除文件存储";a.showTipsMsg({msg:n})})},render:function(){var t=this.state.show?i.displayBlock:i.displayNone;return e.createElement("div",{onClick:this.clickOpen,title:"清除缓存",className:"sidebar-item"},e.createElement("i",{className:"sidebar-item-icon sidebar-item-icon-cache"}),e.createElement("label",{className:"sidebar-item-label"},"缓存"),e.createElement("div",{className:"cache-card",style:t},e.createElement("div",{className:"cache-card-item",onClick:this.clearStorage},e.createElement("p",null,"清除数据存储")),e.createElement("div",{className:"cache-card-item",onClick:this.clearFileStorage},e.createElement("p",null,"清除文件存储"))))}});_exports=l}var _exports;init(),module.exports=_exports;